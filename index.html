<!--
StopSmokingTimer.html customized defaults + dynamic notes by cigarettes saved
-->

<!DOCTYPE html>
<html lang="sk">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ÄŒas od abstinencie - Timer</title>
    <style>
      :root {
        --bg: #0f1724;
        --card: #0b1220;
        --accent: #22c55e;
        --muted: #9aa7b2;
      }
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI",
          Roboto, "Helvetica Neue", Arial;
        color: #e6eef6;
        display: flex;
        align-items: center;
        justify-content: center;
        height: 100vh;
        background: linear-gradient(180deg, #071226 0%, #0b1622 100%),
          url("https://upload.wikimedia.org/wikipedia/commons/7/7d/Velo_nicotine_pouches.jpg");
        background-size: cover;
        background-position: center;
        background-attachment: fixed;
      }
      .wrap {
        width: 960px;
        max-width: 95%;
        background: rgba(0, 0, 0, 0.6);
        backdrop-filter: blur(6px);
        border-radius: 14px;
        padding: 22px;
        box-shadow: 0 10px 30px rgba(2, 6, 23, 0.6);
        position: relative;
      }
      header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 18px;
      }
      h1 {
        font-size: 20px;
        margin: 0;
      }
      p.lead {
        margin: 0;
        color: var(--muted);
        font-size: 13px;
      }
      .grid {
        display: grid;
        grid-template-columns: 1fr 320px;
        gap: 18px;
      }
      .card {
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.05),
          rgba(255, 255, 255, 0.02)
        );
        padding: 18px;
        border-radius: 12px;
      }
      .timer {
        display: flex;
        gap: 12px;
        justify-content: center;
        align-items: center;
        padding: 18px;
      }
      .segment {
        background: rgba(255, 255, 255, 0.05);
        padding: 12px 16px;
        border-radius: 10px;
        text-align: center;
        min-width: 96px;
      }
      .number {
        font-size: 32px;
        font-weight: 700;
        line-height: 1;
      }
      .label {
        font-size: 12px;
        color: var(--muted);
        margin-top: 6px;
      }
      .metrics {
        display: flex;
        gap: 12px;
        flex-wrap: wrap;
        justify-content: center;
        margin-top: 14px;
      }
      .metric {
        flex: 1 1 140px;
        background: rgba(255, 255, 255, 0.05);
        padding: 12px;
        border-radius: 10px;
        text-align: center;
      }
      .metric .big {
        font-size: 20px;
        font-weight: 700;
      }
      form {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }
      label {
        font-size: 13px;
        color: var(--muted);
      }
      input,
      select {
        width: 100%;
        padding: 10px;
        border-radius: 8px;
        border: 1px solid rgba(255, 255, 255, 0.1);
        background: transparent;
        color: inherit;
      }
      .row {
        display: flex;
        gap: 8px;
      }
      button {
        cursor: pointer;
        padding: 10px 12px;
        border-radius: 8px;
        border: 0;
        background: var(--accent);
        color: #052018;
        font-weight: 600;
      }
      .btn-ghost {
        background: transparent;
        border: 1px solid rgba(255, 255, 255, 0.2);
        color: inherit;
      }
      footer {
        margin-top: 10px;
        color: var(--muted);
        font-size: 12px;
        text-align: center;
      }
      #displayBtn {
        position: absolute;
        top: 10px;
        right: 10px;
        background: rgba(255, 255, 255, 0.1);
        border: none;
        padding: 6px 10px;
        border-radius: 8px;
        color: white;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 6px;
      }
      #displayBtn img {
        width: 22px;
        height: 22px;
      }
      #veloLogo {
        position: absolute;
        bottom: 10px;
        right: 10px;
        width: 80px;
        opacity: 0.9;
      }
      @media (max-width: 880px) {
        .grid {
          grid-template-columns: 1fr;
        }
      }
      .hidden {
        display: none !important;
      }
    </style>
  </head>
  <body>
    <div class="wrap">
      <button id="displayBtn" title="Prepni reÅ¾im zobrazenia">
        <span>ZobraziÅ¥ len timer</span>
      </button>
      <img
        id="veloLogo"
        src="https://www.zuvaj.sk/image/cache/catalog/veo/VEO_Purple%20Click-750x750.png"
        alt=""
      />

      <header>
        <div>
          <h1>Ä½UDO uÅ¾ nefajÄÃ­...</h1>
          <p class="lead">
            Ukazuje presnÃ½ Äas (dni, hodiny, minÃºty, sekundy), celkovÃ© hodiny,
            cigarety uÅ¡etrenÃ©, peniaze a poÄet pÃ­v.
          </p>
        </div>
        <div>
          <small class="lead"
            >Tip: nastavte presnÃ½ dÃ¡tum a Äas, kedy kolega prestal.</small
          >
        </div>
      </header>

      <div class="grid">
        <div class="card" id="mainCard">
          <div style="text-align: center">
            <div id="timer" class="timer" aria-live="polite">
              <div class="segment">
                <div id="days" class="number">0</div>
                <div class="label">Dni</div>
              </div>
              <div class="segment">
                <div id="hours" class="number">00</div>
                <div class="label">HodÃ­n</div>
              </div>
              <div class="segment">
                <div id="minutes" class="number">00</div>
                <div class="label">MinÃºt</div>
              </div>
              <div class="segment">
                <div id="seconds" class="number">00</div>
                <div class="label">SekÃºnd</div>
              </div>
            </div>

            <div class="metrics">
              <div class="metric">
                <div class="label">CelkovÃ© hodiny</div>
                <div id="totalHours" class="big">0</div>
              </div>
              <div class="metric">
                <div class="label">Cigarety uÅ¡etrenÃ©</div>
                <div id="cigsSaved" class="big">0</div>
              </div>
              <div class="metric">
                <div class="label">Peniaze uÅ¡etrenÃ©</div>
                <div id="moneySaved" class="big">0.00 â‚¬</div>
              </div>
              <div class="metric">
                <div class="label">PivÃ¡ za to ğŸº</div>
                <div id="beersSaved" class="big">0</div>
              </div>
              <div class="metric">
                <div id="notes" class="big">DrÅ¾Ã­ sa skvele ğŸ’ª</div>
              </div>
            </div>
          </div>

          <footer></footer>
        </div>

        <aside class="card" id="settingsPanel">
          <form id="settings">
            <div>
              <label for="quitDatetime">DÃ¡tum a Äas prestania</label>
              <input type="datetime-local" id="quitDatetime" />
            </div>

            <div>
              <label for="cigsPerDay">Cigarety denne (akÃ½ bol priemer)</label>
              <input type="number" id="cigsPerDay" min="0" step="1" />
            </div>

            <div class="row">
              <div style="flex: 1">
                <label for="pricePerPack">Cena za balÃ­Äek (â‚¬)</label>
                <input type="number" id="pricePerPack" min="0" step="0.01" />
              </div>
              <div style="width: 110px">
                <label for="cigsPerPack">Cig/pack</label>
                <input type="number" id="cigsPerPack" min="1" step="1" />
              </div>
            </div>

            <div class="row">
              <button type="button" id="saveBtn">UloÅ¾iÅ¥</button>
              <button type="button" id="setNow" class="btn-ghost">
                NastaviÅ¥ teraz
              </button>
              <button type="button" id="resetBtn" class="btn-ghost">
                Reset
              </button>
            </div>

            <div style="margin-top: 8px">
              <label for="noteInput">PoznÃ¡mka (zobrazenÃ¡ v metrike)</label>
              <input id="noteInput" />
            </div>
          </form>
        </aside>
      </div>
    </div>

    <script>
      const STORAGE_KEY = "stopSmokingTimer.settings";
      const BEER_PRICE = 2.5;

      function loadSettings() {
        try {
          return JSON.parse(localStorage.getItem(STORAGE_KEY));
        } catch {
          return null;
        }
      }
      function saveSettings(s) {
        localStorage.setItem(STORAGE_KEY, JSON.stringify(s));
      }

      const quitInput = document.getElementById("quitDatetime");
      const cigsInput = document.getElementById("cigsPerDay");
      const priceInput = document.getElementById("pricePerPack");
      const perPackInput = document.getElementById("cigsPerPack");
      const noteInput = document.getElementById("noteInput");

      const daysEl = document.getElementById("days");
      const hoursEl = document.getElementById("hours");
      const minutesEl = document.getElementById("minutes");
      const secondsEl = document.getElementById("seconds");
      const totalHoursEl = document.getElementById("totalHours");
      const cigsSavedEl = document.getElementById("cigsSaved");
      const moneySavedEl = document.getElementById("moneySaved");
      const beersSavedEl = document.getElementById("beersSaved");
      const notesEl = document.getElementById("notes");

      // Default values on first load
      const defaultQuit = "2025-11-02T08:30";
      const defaultSettings = {
        quit: defaultQuit,
        cigsPerDay: 28,
        pricePerPack: 4.2,
        cigsPerPack: 20,
        note: "DrÅ¾Ã­ sa skvele ğŸ’ª",
      };

      let settings = loadSettings() || defaultSettings;

      function populate() {
        quitInput.value = settings.quit;
        cigsInput.value = settings.cigsPerDay;
        priceInput.value = settings.pricePerPack;
        perPackInput.value = settings.cigsPerPack;
        noteInput.value = settings.note;
        notesEl.textContent = settings.note || "";
      }
      populate();

      const motivationalQuotes = [
        "DrÅ¾Ã­ sa skvele ğŸ’ª",
        "ZaÄÃ­na to byÅ¥ nÃ¡roÄnÃ© ğŸ˜¬",
        "UÅ¾ chce rozbÃ­jaÅ¥ stoliÄku ğŸ˜¤",
        "Nervozita sa stupÅˆuje ğŸ˜¡",
        "MoÅ¾no by si zaslÃºÅ¾il pivo ğŸº",
        "Legenda bez dymu ğŸ”¥",
        "Ä½udo, aj komÃ­n by zÃ¡videl tvoju vÃ½drÅ¾!",
        "Aj cigarety sa Å¥a boja spomenÃºÅ¥!",
        "Ä½udo, tvoje pÄ¾Ãºca organizujÃº festival ÄistÃ©ho vzduchu!",
        "Ak si nervÃ³zny, daj si vodu. Ale nie z popolnÃ­ka!",
        "Telo ti Äakuje a peÅˆaÅ¾enka posiela objatie!",
        "Ä½udo, tvoj dych by mohol osvieÅ¾ovaÅ¥ miestnosti!",
        "UÅ¾ Å¥a ani automat na cigy nespoznÃ¡va!",
        "Gratulujeme, si fajÄiarsky dÃ´chodca â€“ bez dymu!",
        "Ä½udo, tvoje ruky uÅ¾ voÅˆajÃº ako Älovek, nie ako komÃ­n!",
        "UÅ¾ Å¥a mÃ´Å¾e objaÅ¥ nefajÄiar bez plynovÃ© masky!",
        "EÅ¡te chvÃ­Ä¾u a tvoje pÄ¾Ãºca si objednajÃº Å¡ampanskÃ©!",
        "Ä½udo, keÄ vydrÅ¾Ã­Å¡, napÃ­Å¡ knihu!",
        "Si ako Batman, ale miesto jaskyne mÃ¡Å¡ ÄistÃ© pÄ¾Ãºca!",
        "Dym z komÃ­na zÃ¡vidÃ­ tvoju absenciu dymu!",
        "Ä½udo, uÅ¾ by si mohol uÄiÅ¥ kurz 'Ako nefajÄiÅ¥ a preÅ¾iÅ¥'!",
        "KaÅ¾dÃ½ moment bez cigy = level up v hre Å½ivot!",
        "Ä½udo, keby bola sila vÃ´le mena, volÃ¡Å¡ sa NikotÃ­nobijec!",
        "Aj cigarety si Å¥a dali na zoznam zakÃ¡zanÃ½ch osÃ´b!",
        "Tvoj nos prÃ¡ve zistil, Å¾e svet vonia!",
        "Ä½udo, tvoje pÄ¾Ãºca pÃ­Å¡u list: 'Äakujeme, koneÄne!'",
        "UÅ¾ niekoÄ¾ko dnÃ­! Keby si bol motor, ideÅ¡ na ÄistÃ½ vzduch!",
        "Dym uÅ¾ len na fotkÃ¡ch!",
        "Ä½udo, si ako detox v Ä¾udskej podobe!",
        "KaÅ¾dÃ¡ minÃºta bez cigy je dÃ´vod na pivo!",
        "NikotÃ­n volal. Hovor neprijatÃ½!",
        "Ä½udo, aj tvoj popolnÃ­k poÅ¾iadal o azyl!",
        "UÅ¾ Å¥a ani zapalovaÄ nepoznÃ¡!",
        "MÃ¡Å¡ viac energie neÅ¾ 5 espresso a 0 cigariet!",
        "Ä½udo, keby si mal achievementy, dostal by si 'DÃ½chaj voÄ¾ne'!",
        "DostaneÅ¡ ÄestnÃ© miesto v Hall of Fame nefajÄiarov!",
        "Cigarety by ti teraz dali potlesk... keby mali ruky!",
        "Ä½udo, tvoje pÄ¾Ãºca si otvÃ¡rajÃº airbnb pre kyslÃ­k!",
        "Nervozita? SkÃºs ju prepiÅ¥ Äajom, nie pivom!",
        "KaÅ¾dÃ½ deÅˆ bez dymu je bonusovÃ½ level Å¾ivota!",
        "Ä½udo, tvoje triÄko koneÄne nepreÅ¡lo testom zÃ¡pachu!",
        "UÅ¾ ani pes nezutekÃ¡ keÄ si blÃ­zko!",
        "Tvoje telo mÃ¡ party: vstup len pre nefajÄiarov!",
        "Ä½udo, aj tvoje zuby si zobrali dovolenku od nikotÃ­nu!",
        "Si ako filter HEPA â€“ zachytÃ­Å¡ len to dobrÃ©!",
        "PopolnÃ­k sa sÅ¥ahuje do mÃºzea minulosti!",
        "Ä½udo, mÃ¡Å¡ viac peÅˆazÃ­ a menej dymu â€“ ideÃ¡l!",
        "Keby mal NikotÃ­n city, teraz plaÄe!",
        "EÅ¡te trochu a si ÄistÃ½ celÃ½ rok!",
        "Ä½udo, tvoje telo mÃ¡ novÃ½ soundtrack: ticho bez kaÅ¡Ä¾a!",
        "Tvoja pleÅ¥ ti posiela â¤ï¸",
        "Si ako programÃ¡tor bez bugov â€“ ÄistÃ½!",
        "UÅ¾ aj tvoja kÃ¡va chutÃ­ lepÅ¡ie!",
        "Ä½udo, si walking victory!",
        "Ak vydrÅ¾Ã­Å¡, si oficiÃ¡lne legendÃ¡rny!",
        "Ä½udo â€“ rekord vo vesmÃ­re!",
        "Si ninja nefajÄenia!",
        "Ä½udo, vzduch Å¥a adoptoval!",
        "Cigarety plaÄÃº do vankÃºÅ¡a!",
        "Si ako novÃ½ mobil - bez Å¡kodlivÃ½ch aplikÃ¡ciÃ­!",
        "Tvoje pÄ¾Ãºca pÃ­Å¡u 5-hviezdiÄkovÃ© recenzie!",
        "Aj komÃ­n Å¥a respektuje!",
        "Si Å¾ivÃ½ dÃ´kaz, Å¾e zÃ¡zraky existujÃº!",
        "Ä½udo, si upgrade svojho starÃ©ho ja!",
        "Peniaze rastÃº, dym klesÃ¡ - stonks!",
        "Si fresh ako rannÃ¡ rosa!",
        "Cigarety Å¥a vyradili zo zoznamu priateÄ¾ov!",
        "Ä½udo, si antivÃ­rus pre pÄ¾Ãºca!",
        "Aj tvoj tieÅˆ vonia lepÅ¡ie!",
        "Si walking advertisement pre zdravÃ½ Å¾ivot!",
        "Ä½udo, mÃ¡Å¡ superpower - dÃ½chaÅ¡ Äisto!",
        "Tvoje pÄ¾Ãºca oslavujÃº nezÃ¡vislosÅ¥!",
        "Si ako Tesla - ekologickÃ½ a tichÃ½!",
        "Ä½udo, aj tvoj dych mÃ¡ teraz WiFi - pripojenÃ½ k zdraviu!",
        "Cigarety poÅ¾iadali o azyl v inej krajine!",
        "Si ako novÃ¡ verzia seba - bez bugov!",
        "Ä½udo, tvoja peÅˆaÅ¾enka ti Äakuje standing ovation!",
        "Aj tvoje obleÄenie si oddÃ½chlo!",
        "Si proof of concept pre zdravÃ½ Å¾ivot!",
        "Ä½udo, mÃ¡Å¡ achievement unlocked: ÄŒistÃ½ Å¾ivot!",
        "Tvoje telo mÃ¡ teraz premium subscription na zdravie!",
      ];

      let currentNote = "";
      let lastHour = -1;

      function getDynamicNote(totalHours) {
        // Ak sa hodina nezmenila, vrÃ¡Å¥ aktuÃ¡lnu poznÃ¡mku
        if (totalHours === lastHour && currentNote) {
          return currentNote;
        }

        // Ak sa hodina zmenila, vygeneruj novÃº poznÃ¡mku
        lastHour = totalHours;
        const randomIndex = Math.floor(
          Math.random() * motivationalQuotes.length
        );
        currentNote = motivationalQuotes[randomIndex];
        return currentNote;
      }

      function update() {
        const quitStr = quitInput.value;
        if (!quitStr) return;
        const quitDate = new Date(quitStr),
          now = new Date();
        let diff = now - quitDate;
        if (diff < 0) diff = 0;
        const sec = Math.floor(diff / 1e3) % 60,
          min = Math.floor(diff / 6e4) % 60,
          hrs = Math.floor(diff / 36e5) % 24,
          days = Math.floor(diff / 864e5);
        const totalHours = Math.floor(diff / 36e5);
        daysEl.textContent = days;
        hoursEl.textContent = String(hrs).padStart(2, "0");
        minutesEl.textContent = String(min).padStart(2, "0");
        secondsEl.textContent = String(sec).padStart(2, "0");
        totalHoursEl.textContent = totalHours.toLocaleString("sk-SK");
        const cigsPerDay = +cigsInput.value || 0,
          daysFloat = diff / 864e5,
          cigsSaved = Math.floor(
            daysFloat * cigsPerDay + (hrs / 24) * cigsPerDay
          );
        cigsSavedEl.textContent = cigsSaved.toLocaleString("sk-SK");
        const pricePerPack = +priceInput.value || 0,
          cigsPerPack = +perPackInput.value || 20,
          packsEquivalent = cigsSaved / cigsPerPack,
          money = packsEquivalent * pricePerPack;
        moneySavedEl.textContent =
          money.toLocaleString("sk-SK", {
            minimumFractionDigits: 2,
            maximumFractionDigits: 2,
          }) + " â‚¬";
        const beers = Math.floor(money / BEER_PRICE);
        beersSavedEl.textContent = beers.toLocaleString("sk-SK");
        notesEl.textContent = getDynamicNote(totalHours);
      }
      setInterval(update, 1000);
      update();

      document.getElementById("saveBtn").onclick = () => {
        settings.quit = quitInput.value;
        settings.cigsPerDay = +cigsInput.value || 0;
        settings.pricePerPack = +priceInput.value || 0;
        settings.cigsPerPack = +perPackInput.value || 20;
        settings.note = noteInput.value || "";
        saveSettings(settings);
        notesEl.textContent = settings.note;
        alert("Nastavenia uloÅ¾enÃ©.");
      };
      document.getElementById("setNow").onclick = () => {
        const now = new Date(),
          local = new Date(now.getTime() - now.getTimezoneOffset() * 6e4)
            .toISOString()
            .slice(0, 16);
        quitInput.value = local;
        settings.quit = local;
        saveSettings(settings);
        update();
      };
      document.getElementById("resetBtn").onclick = () => {
        if (confirm("Naozaj resetovaÅ¥ nastavenia?")) {
          localStorage.removeItem(STORAGE_KEY);
          settings = defaultSettings;
          populate();
          update();
          alert("ResetovanÃ©.");
        }
      };
      [quitInput, cigsInput, priceInput, perPackInput, noteInput].forEach(
        (el) =>
          el.addEventListener("change", () => {
            settings.quit = quitInput.value;
            settings.cigsPerDay = +cigsInput.value || 0;
            settings.pricePerPack = +priceInput.value || 0;
            settings.cigsPerPack = +perPackInput.value || 20;
            settings.note = noteInput.value || "";
            saveSettings(settings);
          })
      );

      const displayBtn = document.getElementById("displayBtn");
      const settingsPanel = document.getElementById("settingsPanel");
      let displayMode = false;
      displayBtn.onclick = () => {
        displayMode = !displayMode;
        settingsPanel.classList.toggle("hidden", displayMode);
        if (displayMode) {
          displayBtn.querySelector("span").textContent = "ZobraziÅ¥ nastavenia";
        } else {
          displayBtn.querySelector("span").textContent = "ZobraziÅ¥ len timer";
        }
      };

      quitInput.focus();
    </script>
  </body>
</html>
